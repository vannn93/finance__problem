<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>SmartDebt - GenZ Finance Hub</title>
    <link rel="stylesheet" href="../css/main.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* Animasi Super Smooth */
        .fade-in {
            animation: fadeIn 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
        }

        .slide-up {
            animation: slideUp 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
        }

        .spring-bounce {
            animation: springBounce 0.9s cubic-bezier(0.68, -0.55, 0.265, 1.55) both;
        }

        .pulse-glow {
            animation: pulseGlow 3s ease-in-out infinite both;
        }

        .float-animation {
            animation: float 6s ease-in-out infinite both;
        }

        .slide-in-right {
            animation: slideInRight 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
        }

        .scale-in {
            animation: scaleIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
        }

        .typewriter {
            animation: typewriter 1.5s steps(20) both, blink 0.8s infinite;
            overflow: hidden;
            white-space: nowrap;
            border-right: 2px solid;
        }

        .stagger-item {
            opacity: 0;
            animation: staggerFade 0.6s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95) rotateX(10deg);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1) rotateX(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px) rotateX(15deg);
            }

            to {
                opacity: 1;
                transform: translateY(0) rotateX(0);
            }
        }

        @keyframes springBounce {
            0% {
                transform: scale(0.3) rotate(-8deg);
                opacity: 0;
            }

            50% {
                transform: scale(1.15) rotate(3deg);
                opacity: 0.8;
            }

            70% {
                transform: scale(0.95) rotate(-2deg);
                opacity: 0.9;
            }

            85% {
                transform: scale(1.05) rotate(1deg);
                opacity: 0.95;
            }

            100% {
                transform: scale(1) rotate(0);
                opacity: 1;
            }
        }

        @keyframes pulseGlow {

            0%,
            100% {
                box-shadow: 0 0 15px rgba(139, 92, 246, 0.4);
            }

            50% {
                box-shadow: 0 0 35px rgba(139, 92, 246, 0.7);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg) scale(1);
            }

            33% {
                transform: translateY(-15px) rotate(3deg) scale(1.02);
            }

            66% {
                transform: translateY(-8px) rotate(-2deg) scale(0.98);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px) skewX(-8deg);
            }

            to {
                opacity: 1;
                transform: translateX(0) skewX(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.5) rotate(12deg);
            }

            to {
                opacity: 1;
                transform: scale(1) rotate(0);
            }
        }

        @keyframes typewriter {
            from {
                width: 0;
            }

            to {
                width: 100%;
            }
        }

        @keyframes blink {

            0%,
            100% {
                border-color: transparent;
            }

            50% {
                border-color: #8b5cf6;
            }
        }

        @keyframes staggerFade {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Micro celebration effect yang lebih smooth */
        .micro-celebrate {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .micro-celebrate:hover {
            transform: translateY(-4px) scale(1.03);
        }

        .micro-celebrate:active {
            transform: translateY(1px) scale(0.97);
        }

        /* Morphic card effect yang lebih menarik */
        .morphic-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.7));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow:
                0 12px 45px rgba(0, 0, 0, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 24px;
            overflow: hidden;
            position: relative;
        }

        .morphic-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow:
                0 25px 70px rgba(0, 0, 0, 0.18),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
        }

        .morphic-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -150%;
            width: 150%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            transition: left 0.8s;
            transform: skewX(-15deg);
        }

        .morphic-card:hover::before {
            left: 150%;
        }

        /* Text gradient yang lebih menarik */
        .text-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-size: 200% 200%;
            animation: gradientShift 6s ease infinite;
        }

        @keyframes gradientShift {

            0%,
            100% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        /* Custom styles untuk SmartDebt */
        .debt-card {
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 20px;
            overflow: hidden;
        }

        .debt-card:hover {
            transform: translateY(-8px) scale(1.02);
        }

        .interest-badge {
            transition: all 0.3s ease;
            border-radius: 20px;
            padding: 8px 16px;
            font-weight: 600;
        }

        .interest-badge:hover {
            transform: scale(1.1) translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
        }

        /* Input fields yang lebih menarik */
        .input-field {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 16px;
            border: 2px solid rgba(99, 102, 241, 0.15);
            background: rgba(255, 255, 255, 0.9);
            padding: 14px 18px;
            font-size: 16px;
        }

        .input-field:focus {
            border-color: #6366f1;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.25);
            transform: scale(1.03);
            background: rgba(255, 255, 255, 0.95);
        }

        /* Button styles yang lebih menarik */
        .btn-primary {
            background: linear-gradient(135deg, #6366f1, #8b5cf6, #a78bfa);
            border: none;
            border-radius: 18px;
            padding: 16px 28px;
            font-weight: 700;
            color: white;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.35);
            position: relative;
            overflow: hidden;
        }

        .btn-primary:hover {
            transform: translateY(-6px) scale(1.06);
            box-shadow: 0 18px 40px rgba(99, 102, 241, 0.5);
            background: linear-gradient(135deg, #8b5cf6, #a78bfa, #c4b5fd);
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid rgba(99, 102, 241, 0.25);
            border-radius: 18px;
            padding: 14px 26px;
            font-weight: 600;
            color: #6366f1;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(10px);
        }

        .btn-secondary:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
            border-color: #6366f1;
            background: rgba(99, 102, 241, 0.08);
        }

        /* Progress bars yang lebih menarik */
        .progress-bar {
            height: 10px;
            border-radius: 12px;
            background: rgba(99, 102, 241, 0.15);
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            border-radius: 12px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6, #a78bfa, #c4b5fd);
            transition: width 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -150%;
            width: 150%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            animation: shimmer 2.5s infinite;
        }

        @keyframes shimmer {
            0% {
                left: -150%;
            }

            100% {
                left: 150%;
            }
        }

        /* Notification yang lebih menarik */
        .notification {
            animation: slideInRight 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 18px;
            padding: 18px 22px;
            margin-bottom: 12px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border-left: 5px solid;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Background pattern yang lebih dinamis */
        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }

        .floating-shape {
            position: absolute;
            border-radius: 50%;
            opacity: 0.08;
            animation: float 20s infinite linear;
            filter: blur(1px);
        }

        .shape-1 {
            width: 250px;
            height: 250px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            top: 5%;
            left: 3%;
            animation-delay: 0s;
        }

        .shape-2 {
            width: 180px;
            height: 180px;
            background: linear-gradient(135deg, #10b981, #059669);
            top: 65%;
            right: 8%;
            animation-delay: -7s;
        }

        .shape-3 {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            bottom: 15%;
            left: 15%;
            animation-delay: -12s;
        }

        .shape-4 {
            width: 160px;
            height: 160px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            top: 25%;
            right: 15%;
            animation-delay: -9s;
        }

        .shape-5 {
            width: 90px;
            height: 90px;
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            bottom: 40%;
            left: 80%;
            animation-delay: -5s;
        }

        /* Chart container styling */
        .chart-container {
            position: relative;
            transition: all 0.5s ease;
        }

        .chart-container:hover {
            transform: scale(1.02);
        }

        /* Debt status indicators */
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.2);
                opacity: 0.7;
            }
        }

        /* Number counter animation */
        .counter {
            font-variant-numeric: tabular-nums;
            transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Stagger animation delays */
        .stagger-1 {
            animation-delay: 0.1s;
        }

        .stagger-2 {
            animation-delay: 0.2s;
        }

        .stagger-3 {
            animation-delay: 0.3s;
        }

        .stagger-4 {
            animation-delay: 0.4s;
        }

        .stagger-5 {
            animation-delay: 0.5s;
        }

        /* SOLUSI RESPONSIVE PALING SEDERHANA */
        @media (max-width: 768px) {

            /* 1. Buat semua jadi satu kolom */
            .grid,
            .grid-cols-1,
            .grid-cols-2,
            .grid-cols-3,
            .grid-cols-4,
            .md\:grid-cols-2,
            .lg\:grid-cols-3 {
                grid-template-columns: 1fr !important;
            }

            /* 2. Kurangi padding */
            .p-6 {
                padding: 1rem !important;
            }

            .py-8 {
                padding-top: 1rem !important;
                padding-bottom: 1rem !important;
            }

            .px-4 {
                padding-left: 0.5rem !important;
                padding-right: 0.5rem !important;
            }

            /* 3. Perkecil font */
            .text-4xl {
                font-size: 1.5rem !important;
            }

            .text-2xl {
                font-size: 1.25rem !important;
            }

            .text-xl {
                font-size: 1.125rem !important;
            }

            /* 4. Buat button dan input full width */
            button,
            .btn-primary,
            .btn-secondary,
            input,
            select {
                width: 100% !important;
                margin-bottom: 0.5rem;
            }

            /* 5. Sembunyikan yang tidak perlu di mobile */
            .floating-shapes {
                display: none !important;
            }

            /* 6. Nonaktifkan efek hover berlebihan */
            *:hover {
                transform: none !important;
            }
        }

        /* Untuk layar sangat kecil */
        @media (max-width: 360px) {
            body {
                font-size: 14px !important;
            }

            .text-4xl {
                font-size: 1.25rem !important;
            }

            .text-2xl {
                font-size: 1.125rem !important;
            }
        }

        /* Perbaiki overflow umum */
        html,
        body {
            max-width: 100%;
            overflow-x: hidden;
        }

        /* Pastikan konten tidak keluar layar */
        * {
            max-width: 100%;
        }

        /* SOLUSI NAVBAR FIXED PALING PASTI */
        nav {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            z-index: 1000 !important;
            width: 100% !important;
        }

        /* Beri margin atas pada konten utama agar tidak tertutup navbar */
        main {
            margin-top: 80px !important;
            padding-top: 20px !important;
            /* Tetap beri sedikit padding */
        }

        /* Untuk mobile */
        @media (max-width: 768px) {
            main {
                margin-top: 70px !important;
                padding-top: 15px !important;
            }
        }
    </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50">
    <!-- Background Pattern yang Lebih Dinamis -->
    <div class="floating-shapes">
        <div class="floating-shape shape-1"></div>
        <div class="floating-shape shape-2"></div>
        <div class="floating-shape shape-3"></div>
        <div class="floating-shape shape-4"></div>
        <div class="floating-shape shape-5"></div>
    </div>

    <!-- Navigation Header -->
    <nav class="relative bg-white/95 backdrop-blur-xl border-b border-white/30 shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <div
                            class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-xl micro-celebrate">
                            <i class="fas fa-wallet text-white text-lg"></i>
                        </div>
                        <span class="ml-3 text-xl font-bold text-gradient">GenZ Finance Hub</span>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="main_dashboard.html"
                            class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-all duration-300 micro-celebrate">
                            <i class="fas fa-home mr-2"></i>Dashboard
                        </a>
                        <a href="money_mirror_analysis.html"
                            class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-all duration-300 micro-celebrate">
                            <i class="fas fa-mirror mr-2"></i>MoneyMirror
                        </a>
                        <a href="zero_budget_tracker.html"
                            class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-all duration-300 micro-celebrate">
                            <i class="fas fa-calculator mr-2"></i>ZeroBudget
                        </a>
                        <a href="subs_tracker_manager.html"
                            class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-all duration-300 micro-celebrate">
                            <i class="fas fa-credit-card mr-2"></i>SubsTracker
                        </a>
                        <a href="splitmate_bill_splitter.html"
                            class="text-gray-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-all duration-300 micro-celebrate">
                            <i class="fas fa-users mr-2"></i>SplitMate
                        </a>
                        <a href="smartdebt_calculator.html"
                            class="bg-gradient-to-r from-blue-100 to-purple-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium shadow-lg micro-celebrate">
                            <i class="fas fa-chart-line mr-2"></i>SmartDebt
                        </a>
                    </div>
                </div>

                <!-- Mobile menu button -->
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-600 hover:text-blue-600 p-2 micro-celebrate">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>

                <!-- User Profile -->
                <div class="hidden md:flex items-center space-x-4">
                    <div class="relative">
                        <button
                            class="flex items-center space-x-2 text-gray-600 hover:text-blue-600 transition-all duration-300 micro-celebrate">
                            <img src="https://img.rocket.new/generatedImages/rocket_gen_img_1a5df2297-1763292384104.png"
                                alt="User profile picture" class="w-8 h-8 rounded-full object-cover shadow-lg"
                                onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;">
                            <span class="text-sm font-medium" id="userName">User</span>
                            <i class="fas fa-chevron-down text-xs transition-transform duration-300"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div id="mobile-menu" class="md:hidden hidden bg-white/95 backdrop-blur-xl border-t border-white/30 shadow-2xl">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="main_dashboard.html"
                    class="text-gray-600 hover:text-blue-600 block px-3 py-2 text-base font-medium rounded-md transition-all duration-300 micro-celebrate">
                    <i class="fas fa-home mr-2"></i>Dashboard
                </a>
                <a href="money_mirror_analysis.html"
                    class="text-gray-600 hover:text-blue-600 block px-3 py-2 text-base font-medium rounded-md transition-all duration-300 micro-celebrate">
                    <i class="fas fa-mirror mr-2"></i>MoneyMirror
                </a>
                <a href="zero_budget_tracker.html"
                    class="text-gray-600 hover:text-blue-600 block px-3 py-2 text-base font-medium rounded-md transition-all duration-300 micro-celebrate">
                    <i class="fas fa-calculator mr-2"></i>ZeroBudget
                </a>
                <a href="subs_tracker_manager.html"
                    class="text-gray-600 hover:text-blue-600 block px-3 py-2 text-base font-medium rounded-md transition-all duration-300 micro-celebrate">
                    <i class="fas fa-credit-card mr-2"></i>SubsTracker
                </a>
                <a href="splitmate_bill_splitter.html"
                    class="text-gray-600 hover:text-blue-600 block px-3 py-2 text-base font-medium rounded-md transition-all duration-300 micro-celebrate">
                    <i class="fas fa-users mr-2"></i>SplitMate
                </a>
                <a href="smartdebt_calculator.html"
                    class="bg-gradient-to-r from-blue-100 to-purple-100 text-blue-700 block px-3 py-2 text-base font-medium rounded-md shadow-lg micro-celebrate">
                    <i class="fas fa-chart-line mr-2"></i>SmartDebt
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Page Header -->
        <div class="mb-8 fade-in">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-4xl font-bold text-gradient mb-3 spring-bounce">SmartDebt</h1>
                    <p class="text-lg text-gray-600 typewriter">Hitung dan kelola hutang dengan cerdas! ðŸ“ŠðŸ’¡</p>
                </div>
                <div class="hidden sm:flex items-center space-x-4">
                    <div class="text-right">
                        <p class="text-sm text-gray-500">Total Hutang Aktif</p>
                        <p class="text-2xl font-bold text-blue-600 counter" id="totalActiveDebt">Rp 0</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- Total Debt -->
            <div class="morphic-card p-6 fade-in stagger-item stagger-1">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 mb-1">Total Hutang</p>
                        <p class="text-2xl font-bold text-gradient counter" id="totalDebt">Rp 0</p>
                    </div>
                    <div
                        class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-xl micro-celebrate">
                        <i class="fas fa-money-bill-wave text-white text-xl"></i>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="flex items-center text-sm">
                        <span class="text-green-600 font-medium" id="debtChange">+0%</span>
                        <span class="text-gray-500 ml-1">dari bulan lalu</span>
                    </div>
                </div>
            </div>

            <!-- Active Debts -->
            <div class="morphic-card p-6 fade-in stagger-item stagger-2">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 mb-1">Hutang Aktif</p>
                        <p class="text-2xl font-bold text-blue-600 counter" id="activeDebts">0</p>
                    </div>
                    <div
                        class="w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl flex items-center justify-center shadow-xl micro-celebrate">
                        <i class="fas fa-clock text-white text-xl"></i>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="flex items-center text-sm">
                        <span class="text-blue-600 font-medium" id="activeLoans">0 pinjaman</span>
                        <span class="text-gray-500 ml-1">berjalan</span>
                    </div>
                </div>
            </div>

            <!-- Total Interest -->
            <div class="morphic-card p-6 fade-in stagger-item stagger-3">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 mb-1">Total Bunga</p>
                        <p class="text-2xl font-bold text-amber-600 counter" id="totalInterest">Rp 0</p>
                    </div>
                    <div
                        class="w-12 h-12 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl flex items-center justify-center shadow-xl micro-celebrate">
                        <i class="fas fa-percentage text-white text-xl"></i>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="flex items-center text-sm">
                        <span class="text-amber-600 font-medium">Akumulasi</span>
                    </div>
                </div>
            </div>

            <!-- Monthly Payment -->
            <div class="morphic-card p-6 fade-in stagger-item stagger-4">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500 mb-1">Cicilan/Bulan</p>
                        <p class="text-2xl font-bold text-green-600 counter" id="monthlyPayment">Rp 0</p>
                    </div>
                    <div
                        class="w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-xl micro-celebrate">
                        <i class="fas fa-calendar-alt text-white text-xl"></i>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="flex items-center text-sm">
                        <span class="text-green-600 font-medium">Rata-rata</span>
                        <span class="text-gray-500 ml-1">per bulan</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Debt Calculator -->
            <div class="lg:col-span-1">
                <div class="morphic-card p-6 fade-in">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-bold text-gray-800">Kalkulator Hutang</h2>
                        <i class="fas fa-calculator text-blue-500 text-xl micro-celebrate"></i>
                    </div>

                    <form id="debtCalculatorForm" class="space-y-4">
                        <div>
                            <label for="debtName" class="block text-sm font-medium text-gray-700 mb-2">Nama
                                Hutang</label>
                            <input type="text" id="debtName" class="input-field w-full"
                                placeholder="Kredit Motor, Pinjaman Bank, dll." required>
                        </div>

                        <div>
                            <label for="debtAmount" class="block text-sm font-medium text-gray-700 mb-2">Jumlah Hutang
                                (Rp)</label>
                            <input type="number" id="debtAmount" class="input-field w-full" placeholder="10000000"
                                required>
                        </div>

                        <div>
                            <label for="interestRate" class="block text-sm font-medium text-gray-700 mb-2">Suku Bunga (%
                                per tahun)</label>
                            <input type="number" id="interestRate" class="input-field w-full" placeholder="12"
                                step="0.1" required>
                        </div>

                        <div>
                            <label for="loanTerm" class="block text-sm font-medium text-gray-700 mb-2">Jangka Waktu
                                (bulan)</label>
                            <input type="number" id="loanTerm" class="input-field w-full" placeholder="12" required>
                        </div>

                        <div>
                            <label for="paymentType" class="block text-sm font-medium text-gray-700 mb-2">Jenis
                                Pembayaran</label>
                            <select id="paymentType" class="input-field w-full" required>
                                <option value="annuity">Anuitas (Cicilan Tetap)</option>
                                <option value="flat">Flat (Bunga Tetap)</option>
                                <option value="effective">Efektif (Bunga Menurun)</option>
                            </select>
                        </div>

                        <button type="submit" class="btn-primary w-full py-4 micro-celebrate pulse-glow">
                            <i class="fas fa-calculator mr-2"></i>
                            Hitung & Simpan Hutang
                        </button>
                    </form>

                    <!-- Quick Results -->
                    <div id="quickResults"
                        class="mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl border border-blue-100 hidden">
                        <h3 class="font-semibold text-gray-800 mb-3">Hasil Perhitungan</h3>
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">Cicilan/Bulan:</span>
                                <span class="font-semibold text-blue-600" id="resultMonthly">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">Total Bunga:</span>
                                <span class="font-semibold text-amber-600" id="resultInterest">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">Total Bayar:</span>
                                <span class="font-semibold text-green-600" id="resultTotal">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Debt Management -->
                <div class="morphic-card p-6 mt-6 fade-in">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Kelola Hutang</h3>
                    <div class="space-y-3">
                        <button id="addDebtBtn" class="w-full btn-secondary text-left p-4 micro-celebrate">
                            <div class="flex items-center">
                                <div
                                    class="w-10 h-10 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full flex items-center justify-center mr-3">
                                    <i class="fas fa-plus text-blue-600"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Tambah Hutang</p>
                                    <p class="text-xs text-gray-500">Catat hutang baru</p>
                                </div>
                            </div>
                        </button>
                        <button id="debtStrategyBtn" class="w-full btn-secondary text-left p-4 micro-celebrate">
                            <div class="flex items-center">
                                <div
                                    class="w-10 h-10 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full flex items-center justify-center mr-3">
                                    <i class="fas fa-chess-knight text-green-600"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Strategi Pelunasan</p>
                                    <p class="text-xs text-gray-500">Optimalkan pembayaran</p>
                                </div>
                            </div>
                        </button>
                        <button id="exportDebtBtn" class="w-full btn-secondary text-left p-4 micro-celebrate">
                            <div class="flex items-center">
                                <div
                                    class="w-10 h-10 bg-gradient-to-r from-amber-100 to-orange-100 rounded-full flex items-center justify-center mr-3">
                                    <i class="fas fa-file-export text-amber-600"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Ekspor Laporan</p>
                                    <p class="text-xs text-gray-500">Download data hutang</p>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Debt Details & Visualization -->
            <div class="lg:col-span-2">
                <div class="morphic-card p-6 fade-in">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-bold text-gray-800">Detail Hutang</h2>
                        <div class="flex items-center space-x-2">
                            <button id="sortDebtsBtn"
                                class="text-gray-500 hover:text-blue-600 p-2 rounded-lg transition-all duration-300 micro-celebrate">
                                <i class="fas fa-sort text-sm"></i>
                            </button>
                            <button id="filterDebtsBtn"
                                class="text-gray-500 hover:text-blue-600 p-2 rounded-lg transition-all duration-300 micro-celebrate">
                                <i class="fas fa-filter text-sm"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Debt List -->
                    <div id="debtList" class="space-y-4">
                        <!-- Debts will be dynamically generated here -->
                    </div>

                    <!-- Empty State -->
                    <div id="emptyState" class="text-center py-12">
                        <div
                            class="w-24 h-24 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4 shadow-xl">
                            <i class="fas fa-money-bill-wave text-blue-400 text-3xl"></i>
                        </div>
                        <h3 class="text-lg font-medium text-gray-800 mb-2">Belum Ada Hutang</h3>
                        <p class="text-gray-500 mb-4">Mulai hitung dan kelola hutang pertama kamu!</p>
                        <button class="btn-primary micro-celebrate pulse-glow"
                            onclick="document.getElementById('debtAmount').focus()">
                            <i class="fas fa-plus mr-2"></i>
                            Hitung Hutang
                        </button>
                    </div>
                </div>

                <!-- Charts & Analysis -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                    <!-- Debt Distribution -->
                    <div class="morphic-card p-6 slide-in-right">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Distribusi Hutang</h3>
                        <div class="chart-container h-64">
                            <canvas id="debtDistributionChart"></canvas>
                        </div>
                    </div>

                    <!-- Payment Schedule -->
                    <div class="morphic-card p-6 slide-in-right">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Jadwal Pembayaran</h3>
                        <div class="chart-container h-64">
                            <canvas id="paymentScheduleChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Debt Insights -->
                <div class="morphic-card p-6 mt-6 scale-in">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">ðŸ’¡ Insight Cerdas</h3>
                    <div id="debtInsights" class="space-y-3">
                        <!-- Insights will be generated here -->
                    </div>
                    <div id="emptyInsights" class="text-center py-4">
                        <div
                            class="w-12 h-12 bg-gradient-to-r from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-lightbulb text-gray-400"></i>
                        </div>
                        <p class="text-sm text-gray-500">Hitung hutang untuk mendapatkan insight</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification System -->
        <div id="notificationContainer" class="fixed top-20 right-4 z-50 space-y-2"></div>
    </main>

    <!-- Add Debt Modal -->
    <div id="addDebtModal"
        class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="morphic-card max-w-md w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-bold text-gray-800">Tambah Hutang Baru</h3>
                    <button id="closeDebtModal" class="text-gray-500 hover:text-gray-700 micro-celebrate">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <form id="addDebtForm" class="space-y-4">
                    <div>
                        <label for="modalDebtName" class="block text-sm font-medium text-gray-700 mb-2">Nama
                            Hutang</label>
                        <input type="text" id="modalDebtName" class="input-field w-full"
                            placeholder="Kredit Motor, Pinjaman Bank, dll." required>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="modalDebtAmount"
                                class="block text-sm font-medium text-gray-700 mb-2">Jumlah</label>
                            <input type="number" id="modalDebtAmount" class="input-field w-full" placeholder="10000000"
                                required>
                        </div>
                        <div>
                            <label for="modalInterestRate" class="block text-sm font-medium text-gray-700 mb-2">Bunga
                                (%)</label>
                            <input type="number" id="modalInterestRate" class="input-field w-full" placeholder="12"
                                step="0.1" required>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="modalLoanTerm" class="block text-sm font-medium text-gray-700 mb-2">Jangka
                                (bulan)</label>
                            <input type="number" id="modalLoanTerm" class="input-field w-full" placeholder="12"
                                required>
                        </div>
                        <div>
                            <label for="startDate" class="block text-sm font-medium text-gray-700 mb-2">Tanggal
                                Mulai</label>
                            <input type="date" id="startDate" class="input-field w-full" required>
                        </div>
                    </div>

                    <div>
                        <label for="modalPaymentType" class="block text-sm font-medium text-gray-700 mb-2">Jenis
                            Pembayaran</label>
                        <select id="modalPaymentType" class="input-field w-full" required>
                            <option value="annuity">Anuitas (Cicilan Tetap)</option>
                            <option value="flat">Flat (Bunga Tetap)</option>
                            <option value="effective">Efektif (Bunga Menurun)</option>
                        </select>
                    </div>

                    <div class="flex space-x-3 pt-4">
                        <button type="submit" class="btn-primary flex-1 micro-celebrate">
                            <i class="fas fa-save mr-2"></i>
                            Simpan
                        </button>
                        <button type="button" id="cancelDebt" class="btn-secondary flex-1 micro-celebrate">
                            Batal
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white/95 backdrop-blur-xl border-t border-white/30 shadow-lg mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-4 mb-4 md:mb-0">
                    <div
                        class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg micro-celebrate">
                        <i class="fas fa-wallet text-white text-sm"></i>
                    </div>
                    <span class="text-sm font-medium text-gradient">GenZ Finance Hub</span>
                </div>
                <p class="text-sm text-gray-500 text-center md:text-left">
                    Â© 2025 GenZ Finance Hub. Semua hak dilindungi.
                    <span class="mx-2">|</span>
                    <a href="javascript:void(0)" class="text-blue-600 hover:text-blue-700 micro-celebrate">Bantuan</a>
                    <span class="mx-2">|</span>
                    <a href="javascript:void(0)" class="text-blue-600 hover:text-blue-700 micro-celebrate">Privasi</a>
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Data management
        let debts = [];
        let currentUserId = null;
        let debtChart = null;
        let paymentChart = null;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function () {
            loadUserData();
            loadDebts();
            initializeEventListeners();
            updateDashboard();
            renderDebts();
            initializeCharts();
            updateDebtInsights();
        });

        // Load user data
        function loadUserData() {
            const userSession = localStorage.getItem('userSession');
            if (userSession) {
                try {
                    const session = JSON.parse(userSession);
                    currentUserId = session.userId;
                    document.getElementById('userName').textContent = session.username || 'User';
                } catch (error) {
                    console.error('Error parsing user session:', error);
                }
            }
        }

        // Load debts from localStorage
        function loadDebts() {
            const saved = localStorage.getItem('smartdebt_debts');
            if (saved) {
                try {
                    debts = JSON.parse(saved);
                } catch (error) {
                    console.error('Error parsing debts:', error);
                    debts = [];
                }
            } else {
                debts = [];
                saveDebts();
            }
        }

        // Save debts to localStorage
        function saveDebts() {
            localStorage.setItem('smartdebt_debts', JSON.stringify(debts));
        }

        // Initialize event listeners
        function initializeEventListeners() {
            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            if (mobileMenuButton) {
                mobileMenuButton.addEventListener('click', function () {
                    const mobileMenu = document.getElementById('mobile-menu');
                    if (mobileMenu) {
                        mobileMenu.classList.toggle('hidden');
                        const icon = this.querySelector('i');
                        if (icon) {
                            icon.classList.toggle('fa-bars');
                            icon.classList.toggle('fa-times');
                        }
                    }
                });
            }

            // Debt calculator form
            const debtCalculatorForm = document.getElementById('debtCalculatorForm');
            if (debtCalculatorForm) {
                debtCalculatorForm.addEventListener('submit', handleDebtCalculation);
            }

            // Quick actions
            const addDebtBtn = document.getElementById('addDebtBtn');
            if (addDebtBtn) {
                addDebtBtn.addEventListener('click', showAddDebtModal);
            }

            const debtStrategyBtn = document.getElementById('debtStrategyBtn');
            if (debtStrategyBtn) {
                debtStrategyBtn.addEventListener('click', showDebtStrategy);
            }

            const exportDebtBtn = document.getElementById('exportDebtBtn');
            if (exportDebtBtn) {
                exportDebtBtn.addEventListener('click', showExportOptions);
            }

            // Modal controls
            const closeDebtModal = document.getElementById('closeDebtModal');
            if (closeDebtModal) {
                closeDebtModal.addEventListener('click', closeAddDebtModal);
            }

            const cancelDebt = document.getElementById('cancelDebt');
            if (cancelDebt) {
                cancelDebt.addEventListener('click', closeAddDebtModal);
            }

            const addDebtForm = document.getElementById('addDebtForm');
            if (addDebtForm) {
                addDebtForm.addEventListener('submit', handleAddDebt);
            }

            // Set default start date to today
            const startDateInput = document.getElementById('startDate');
            if (startDateInput) {
                startDateInput.value = new Date().toISOString().split('T')[0];
            }
        }

        // Handle debt calculation
        function handleDebtCalculation(e) {
            e.preventDefault();

            const name = document.getElementById('debtName').value.trim();
            const amount = parseFloat(document.getElementById('debtAmount').value);
            const interestRate = parseFloat(document.getElementById('interestRate').value);
            const term = parseInt(document.getElementById('loanTerm').value);
            const paymentType = document.getElementById('paymentType').value;

            if (!name || !amount || !interestRate || !term) {
                showNotification('Mohon lengkapi semua field!', 'error');
                return;
            }

            if (amount <= 0 || interestRate < 0 || term <= 0) {
                showNotification('Mohon masukkan nilai yang valid!', 'error');
                return;
            }

            const result = calculateDebt(amount, interestRate, term, paymentType);
            displayCalculationResult(result);

            // Create and save debt entry
            const debt = {
                id: Date.now(),
                name: name,
                amount: amount,
                interestRate: interestRate,
                term: term,
                startDate: new Date().toISOString().split('T')[0],
                type: paymentType,
                monthlyPayment: result.monthlyPayment,
                totalInterest: result.totalInterest,
                status: 'active',
                paidMonths: 0,
                createdAt: new Date().toISOString()
            };

            debts.push(debt);
            saveDebts();
            updateDashboard();
            renderDebts();
            updateCharts();
            updateDebtInsights();

            showNotification('Hutang berhasil ditambahkan! ðŸŽ‰', 'success');

            // Reset form
            document.getElementById('debtName').value = '';
            document.getElementById('debtAmount').value = '';
            document.getElementById('interestRate').value = '';
            document.getElementById('loanTerm').value = '';
        }

        // Calculate debt based on payment type
        function calculateDebt(amount, annualInterestRate, termMonths, paymentType) {
            const monthlyInterestRate = annualInterestRate / 100 / 12;
            let monthlyPayment, totalInterest, totalPayment;

            switch (paymentType) {
                case 'annuity':
                    // Anuitas: cicilan tetap
                    monthlyPayment = amount * (monthlyInterestRate * Math.pow(1 + monthlyInterestRate, termMonths)) /
                        (Math.pow(1 + monthlyInterestRate, termMonths) - 1);
                    totalPayment = monthlyPayment * termMonths;
                    totalInterest = totalPayment - amount;
                    break;

                case 'flat':
                    // Flat: bunga tetap
                    monthlyPayment = amount / termMonths + (amount * monthlyInterestRate);
                    totalPayment = monthlyPayment * termMonths;
                    totalInterest = totalPayment - amount;
                    break;

                case 'effective':
                    // Efektif: bunga menurun
                    monthlyPayment = amount / termMonths;
                    totalInterest = 0;
                    let remaining = amount;

                    for (let i = 0; i < termMonths; i++) {
                        totalInterest += remaining * monthlyInterestRate;
                        remaining -= monthlyPayment;
                    }

                    totalPayment = amount + totalInterest;
                    monthlyPayment = totalPayment / termMonths;
                    break;
            }

            return {
                monthlyPayment: Math.round(monthlyPayment),
                totalInterest: Math.round(totalInterest),
                totalPayment: Math.round(totalPayment),
                amount: amount,
                interestRate: annualInterestRate,
                term: termMonths,
                type: paymentType
            };
        }

        // Display calculation result
        function displayCalculationResult(result) {
            const resultsDiv = document.getElementById('quickResults');
            if (resultsDiv) {
                document.getElementById('resultMonthly').textContent = formatCurrency(result.monthlyPayment);
                document.getElementById('resultInterest').textContent = formatCurrency(result.totalInterest);
                document.getElementById('resultTotal').textContent = formatCurrency(result.totalPayment);

                resultsDiv.classList.remove('hidden');

                // Auto hide after 10 seconds
                setTimeout(() => {
                    resultsDiv.classList.add('hidden');
                }, 10000);
            }
        }

        // Show add debt modal
        function showAddDebtModal() {
            const modal = document.getElementById('addDebtModal');
            if (modal) {
                modal.classList.remove('hidden');
                modal.style.display = 'flex';
            }
        }

        // Close add debt modal
        function closeAddDebtModal() {
            const modal = document.getElementById('addDebtModal');
            if (modal) {
                modal.classList.add('hidden');
                modal.style.display = 'none';

                // Reset form
                document.getElementById('addDebtForm').reset();
                document.getElementById('startDate').value = new Date().toISOString().split('T')[0];
            }
        }

        // Handle add debt
        function handleAddDebt(e) {
            e.preventDefault();

            const name = document.getElementById('modalDebtName').value.trim();
            const amount = parseFloat(document.getElementById('modalDebtAmount').value);
            const interestRate = parseFloat(document.getElementById('modalInterestRate').value);
            const term = parseInt(document.getElementById('modalLoanTerm').value);
            const startDate = document.getElementById('startDate').value;
            const paymentType = document.getElementById('modalPaymentType').value;

            if (!name || !amount || !interestRate || !term || !startDate) {
                showNotification('Mohon lengkapi semua field!', 'error');
                return;
            }

            if (amount <= 0 || interestRate < 0 || term <= 0) {
                showNotification('Mohon masukkan nilai yang valid!', 'error');
                return;
            }

            // Calculate payment details
            const calculation = calculateDebt(amount, interestRate, term, paymentType);

            const debt = {
                id: Date.now(),
                name: name,
                amount: amount,
                interestRate: interestRate,
                term: term,
                startDate: startDate,
                type: paymentType,
                monthlyPayment: calculation.monthlyPayment,
                totalInterest: calculation.totalInterest,
                status: 'active',
                paidMonths: 0,
                createdAt: new Date().toISOString()
            };

            debts.push(debt);
            saveDebts();
            updateDashboard();
            renderDebts();
            updateCharts();
            updateDebtInsights();
            closeAddDebtModal();

            showNotification('Hutang berhasil ditambahkan! ðŸŽ‰', 'success');
        }

        // Show debt strategy
        function showDebtStrategy() {
            if (debts.length === 0) {
                showNotification('Tidak ada hutang untuk dianalisis!', 'info');
                return;
            }

            const activeDebts = debts.filter(d => d.status === 'active');
            const highInterestDebts = activeDebts.filter(d => d.interestRate > 15);
            const totalMonthly = activeDebts.reduce((sum, d) => sum + d.monthlyPayment, 0);
            const totalDebt = activeDebts.reduce((sum, d) => sum + d.amount, 0);

            let strategyMessage = "ðŸ’¡ **Strategi Pelunasan Cerdas**\n\n";

            if (highInterestDebts.length > 0) {
                strategyMessage += `âš ï¸ **Prioritas**: Anda punya ${highInterestDebts.length} hutang dengan bunga tinggi (>15%).\n`;
                strategyMessage += `ðŸ’° **Total bunga tinggi**: ${formatCurrency(highInterestDebts.reduce((sum, d) => sum + d.monthlyPayment, 0))}/bulan\n`;
                strategyMessage += `ðŸŽ¯ **Rekomendasi**: Lunasi hutang bunga tinggi dulu untuk hemat total bunga.\n\n`;
            } else {
                strategyMessage += `âœ… **Kondisi baik**: Tidak ada hutang dengan bunga tinggi.\n`;
            }

            strategyMessage += `ðŸ“Š **Analisis Keuangan**:\n`;
            strategyMessage += `â€¢ Total hutang aktif: ${formatCurrency(totalDebt)}\n`;
            strategyMessage += `â€¢ Cicilan bulanan: ${formatCurrency(totalMonthly)}\n`;
            strategyMessage += `â€¢ Jumlah hutang aktif: ${activeDebts.length}\n\n`;

            strategyMessage += `ðŸ’¡ **Tips**:\n`;
            strategyMessage += `â€¢ Bayar tepat waktu untuk hindari denda\n`;
            strategyMessage += `â€¢ Jika bisa, bayar lebih dari minimum\n`;
            strategyMessage += `â€¢ Prioritaskan hutang dengan bunga tertinggi`;

            showNotification(strategyMessage, 'info');
        }

        // Show export options
        function showExportOptions() {
            if (debts.length === 0) {
                showNotification('Tidak ada data hutang untuk diekspor!', 'warning');
                return;
            }

            const activeDebts = debts.filter(d => d.status === 'active');
            const totalAmount = activeDebts.reduce((sum, d) => sum + d.amount, 0);

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 fade-in';
            modal.id = 'exportModal';

            modal.innerHTML = `
            <div class="morphic-card max-w-md w-full">
                <div class="p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-gray-800">Ekspor Data Hutang</h3>
                        <button onclick="closeExportModal()" class="text-gray-500 hover:text-gray-700 micro-celebrate">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl border border-blue-100">
                            <p class="text-sm text-gray-600">Total data yang akan diekspor:</p>
                            <p class="text-lg font-bold text-gray-800">${debts.length} hutang</p>
                            <p class="text-sm text-gray-500">(${activeDebts.length} aktif, ${debts.length - activeDebts.length} lunas)</p>
                        </div>
                        
                        <div class="space-y-3">
                            <button onclick="exportAsCSV()" class="w-full btn-secondary text-left p-4 micro-celebrate">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                        <i class="fas fa-file-csv text-green-600"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Export ke CSV</p>
                                        <p class="text-xs text-gray-500">Format data untuk Excel</p>
                                    </div>
                                </div>
                            </button>
                            
                            <button onclick="exportAsText()" class="w-full btn-secondary text-left p-4 micro-celebrate">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                        <i class="fas fa-file-alt text-blue-600"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Export ke Text</p>
                                        <p class="text-xs text-gray-500">Format mudah dibaca</p>
                                    </div>
                                </div>
                            </button>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <button onclick="closeExportModal()" class="btn-secondary w-full micro-celebrate">
                            Batal
                        </button>
                    </div>
                </div>
            </div>
        `;

            document.body.appendChild(modal);
        }

        // Close export modal
        function closeExportModal() {
            const modal = document.getElementById('exportModal');
            if (modal) {
                modal.remove();
            }
        }

        // Export as CSV
        function exportAsCSV() {
            const headers = ['Nama', 'Jumlah', 'Bunga%', 'Jangka', 'Cicilan/Bulan', 'Total Bunga', 'Status', 'Tanggal Mulai', 'Bulan Dibayar', 'Bulan Tersisa'];

            const rows = debts.map(debt => [
                debt.name,
                debt.amount,
                debt.interestRate,
                debt.term,
                debt.monthlyPayment,
                debt.totalInterest,
                debt.status === 'active' ? 'Aktif' : 'Lunas',
                debt.startDate,
                debt.paidMonths || 0,
                debt.term - (debt.paidMonths || 0)
            ]);

            const csvContent = [headers, ...rows]
                .map(row => row.map(cell => `"${cell}"`).join(','))
                .join('\n');

            const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `smartdebt_export_${new Date().toISOString().slice(0, 10)}.csv`;
            link.click();

            closeExportModal();
            showNotification('Data berhasil diekspor ke CSV! ðŸ“„', 'success');
        }

        // Export as Text
        function exportAsText() {
            const activeDebts = debts.filter(d => d.status === 'active');
            const settledDebts = debts.filter(d => d.status === 'settled');

            let textContent = `LAPORAN HUTANG - SMARTDEBT\n`;
            textContent += `Tanggal: ${new Date().toLocaleDateString('id-ID')}\n`;
            textContent += `========================================\n\n`;

            textContent += `ðŸ“Š RINGKASAN\n`;
            textContent += `Total Hutang Aktif: ${formatCurrency(activeDebts.reduce((sum, d) => sum + d.amount, 0))}\n`;
            textContent += `Total Cicilan/Bulan: ${formatCurrency(activeDebts.reduce((sum, d) => sum + d.monthlyPayment, 0))}\n`;
            textContent += `Hutang Aktif: ${activeDebts.length}\n`;
            textContent += `Hutang Lunas: ${settledDebts.length}\n\n`;

            textContent += `ðŸ“‹ DETAIL HUTANG\n`;
            textContent += `========================================\n`;

            debts.forEach((debt, index) => {
                textContent += `\n${index + 1}. ${debt.name}\n`;
                textContent += `   Jumlah: ${formatCurrency(debt.amount)}\n`;
                textContent += `   Bunga: ${debt.interestRate}%\n`;
                textContent += `   Jangka: ${debt.term} bulan\n`;
                textContent += `   Cicilan: ${formatCurrency(debt.monthlyPayment)}/bulan\n`;
                textContent += `   Status: ${debt.status === 'active' ? 'Aktif' : 'Lunas'}\n`;
                textContent += `   Progress: ${Math.round((debt.paidMonths || 0) / debt.term * 100)}%\n`;
            });

            textContent += `\nðŸ’¡ REKOMENDASI\n`;
            textContent += `========================================\n`;
            textContent += generateDebtStrategy();

            const blob = new Blob([textContent], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `smartdebt_report_${new Date().toISOString().slice(0, 10)}.txt`;
            link.click();

            closeExportModal();
            showNotification('Laporan berhasil diekspor ke Text! ðŸ“', 'success');
        }

        // Generate debt strategy
        function generateDebtStrategy() {
            if (debts.length === 0) {
                return "Mulai dengan mencatat hutang pertama Anda";
            }

            const activeDebts = debts.filter(d => d.status === 'active');
            if (activeDebts.length === 0) {
                return "Semua hutang telah lunas! ðŸŽ‰";
            }

            const highInterestDebts = activeDebts.filter(d => d.interestRate > 15);
            const totalMonthly = activeDebts.reduce((sum, d) => sum + d.monthlyPayment, 0);

            if (highInterestDebts.length > 0) {
                return "Fokus lunasi hutang dengan bunga tinggi terlebih dahulu untuk menghemat total bunga";
            }

            if (totalMonthly > 5000000) {
                return "Pertimbangkan konsolidasi hutang untuk mengurangi beban cicilan bulanan";
            }

            if (activeDebts.length > 3) {
                return "Gunakan metode snowball: lunasi hutang terkecil dulu untuk momentum positif";
            }

            return "Teruskan pembayaran rutin dan hindari penambahan hutang baru";
        }

        // Update dashboard statistics
        function updateDashboard() {
            const activeDebts = debts.filter(debt => debt.status === 'active');
            const totalAmount = activeDebts.reduce((sum, debt) => sum + debt.amount, 0);
            const totalInterest = activeDebts.reduce((sum, debt) => sum + debt.totalInterest, 0);
            const totalMonthly = activeDebts.reduce((sum, debt) => sum + debt.monthlyPayment, 0);

            // Update display
            document.getElementById('totalActiveDebt').textContent = formatCurrency(totalAmount);
            document.getElementById('totalDebt').textContent = formatCurrency(totalAmount);
            document.getElementById('activeDebts').textContent = activeDebts.length;
            document.getElementById('totalInterest').textContent = formatCurrency(totalInterest);
            document.getElementById('monthlyPayment').textContent = formatCurrency(totalMonthly);

            document.getElementById('activeLoans').textContent = `${activeDebts.length} pinjaman`;
        }

        // Render debts
        function renderDebts() {
            const container = document.getElementById('debtList');
            const emptyState = document.getElementById('emptyState');

            if (!container || !emptyState) return;

            if (debts.length === 0) {
                container.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');

            // Sort by status (active first) and date (newest first)
            const sortedDebts = [...debts].sort((a, b) => {
                if (a.status === 'active' && b.status !== 'active') return -1;
                if (a.status !== 'active' && b.status === 'active') return 1;
                return new Date(b.createdAt) - new Date(a.createdAt);
            });

            container.innerHTML = sortedDebts.map(debt => {
                const progress = Math.min(100, (debt.paidMonths || 0) / debt.term * 100);
                const remainingMonths = debt.term - (debt.paidMonths || 0);
                const isActive = debt.status === 'active';

                return `
                <div class="morphic-card p-5 slide-up debt-card" data-debt-id="${debt.id}">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-gradient-to-r ${isActive ? 'from-blue-500 to-purple-600' : 'from-green-500 to-emerald-600'} rounded-xl flex items-center justify-center shadow-lg micro-celebrate">
                                <i class="fas ${isActive ? 'fa-file-invoice-dollar' : 'fa-check-circle'} text-white text-lg"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">${debt.name}</h3>
                                <p class="text-sm text-gray-500">Bunga: ${debt.interestRate}% | Jangka: ${debt.term} bulan</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="font-bold text-lg text-gray-800">${formatCurrency(debt.amount)}</p>
                            <p class="text-sm text-gray-500">${formatCurrency(debt.monthlyPayment)}/bln</p>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-medium text-gray-600">Progress Pelunasan</span>
                            <span class="text-sm font-medium text-gray-800">${Math.round(progress)}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                        <div class="flex justify-between mt-2">
                            <span class="text-xs ${isActive ? 'text-green-600' : 'text-gray-500'}">
                                ${isActive ? `Sisa: ${remainingMonths} bulan` : 'Lunas'}
                            </span>
                            <span class="text-xs text-gray-500">Total Bunga: ${formatCurrency(debt.totalInterest)}</span>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between pt-4 border-t border-gray-200">
                        <div class="flex items-center space-x-2">
                            <span class="status-indicator ${isActive ? 'bg-green-500' : 'bg-gray-400'}"></span>
                            <span class="text-sm text-gray-600">${isActive ? 'Aktif' : 'Lunas'}</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            ${isActive ? `
                            <button onclick="makePayment(${debt.id})" class="text-sm px-4 py-2 bg-green-100 text-green-600 rounded-xl hover:bg-green-200 transition-all duration-300 micro-celebrate">
                                <i class="fas fa-money-bill-wave mr-1"></i>Bayar
                            </button>
                            ` : ''}
                            <button onclick="deleteDebt(${debt.id})" class="text-gray-500 hover:text-red-600 p-2 rounded-lg transition-all duration-300 micro-celebrate">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            }).join('');
        }

        // Make payment
        function makePayment(debtId) {
            const debt = debts.find(d => d.id === debtId);
            if (!debt) {
                showNotification('Hutang tidak ditemukan', 'error');
                return;
            }

            debt.paidMonths = (debt.paidMonths || 0) + 1;

            if (debt.paidMonths >= debt.term) {
                debt.status = 'settled';
                showNotification(`Selamat! Hutang "${debt.name}" telah lunas! ðŸŽ‰`, 'success');
            } else {
                showNotification(`Pembayaran untuk "${debt.name}" berhasil dicatat!`, 'success');
            }

            saveDebts();
            updateDashboard();
            renderDebts();
            updateCharts();
            updateDebtInsights();
        }

        // Delete debt
        function deleteDebt(debtId) {
            if (!confirm('Apakah Anda yakin ingin menghapus hutang ini?')) {
                return;
            }

            debts = debts.filter(d => d.id !== debtId);
            saveDebts();
            updateDashboard();
            renderDebts();
            updateCharts();
            updateDebtInsights();

            showNotification('Hutang berhasil dihapus!', 'success');
        }

        // Initialize charts
        function initializeCharts() {
            updateDebtDistributionChart();
            updatePaymentScheduleChart();
        }

        // Update debt distribution chart
        function updateDebtDistributionChart() {
            const ctx = document.getElementById('debtDistributionChart');
            if (!ctx) return;

            const activeDebts = debts.filter(debt => debt.status === 'active');

            if (debtChart) {
                debtChart.destroy();
            }

            if (activeDebts.length === 0) {
                // Clear canvas and show message
                const canvas = ctx;
                const context = canvas.getContext('2d');
                context.clearRect(0, 0, canvas.width, canvas.height);

                context.fillStyle = '#9ca3af';
                context.font = '14px Arial';
                context.textAlign = 'center';
                context.fillText('Tidak ada data hutang', canvas.width / 2, canvas.height / 2);
                return;
            }

            debtChart = new Chart(ctx.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: activeDebts.map(debt => debt.name),
                    datasets: [{
                        data: activeDebts.map(debt => debt.amount),
                        backgroundColor: [
                            '#6366f1', '#8b5cf6', '#a78bfa', '#c4b5fd',
                            '#10b981', '#059669', '#047857', '#065f46'
                        ],
                        borderWidth: 0,
                        hoverOffset: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true,
                                font: {
                                    size: 11
                                }
                            }
                        }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
        }

        // Update payment schedule chart
        function updatePaymentScheduleChart() {
            const ctx = document.getElementById('paymentScheduleChart');
            if (!ctx) return;

            const activeDebts = debts.filter(debt => debt.status === 'active');

            if (paymentChart) {
                paymentChart.destroy();
            }

            if (activeDebts.length === 0) {
                // Clear canvas and show message
                const canvas = ctx;
                const context = canvas.getContext('2d');
                context.clearRect(0, 0, canvas.width, canvas.height);

                context.fillStyle = '#9ca3af';
                context.font = '14px Arial';
                context.textAlign = 'center';
                context.fillText('Tidak ada jadwal pembayaran', canvas.width / 2, canvas.height / 2);
                return;
            }

            // Calculate payments for next 6 months
            const months = ['Bulan 1', 'Bulan 2', 'Bulan 3', 'Bulan 4', 'Bulan 5', 'Bulan 6'];
            const totalMonthly = activeDebts.reduce((sum, d) => sum + d.monthlyPayment, 0);
            const payments = months.map(() => totalMonthly);

            paymentChart = new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'Total Pembayaran/Bulan',
                        data: payments,
                        borderColor: '#6366f1',
                        backgroundColor: 'rgba(99, 102, 241, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#8b5cf6',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function (value) {
                                    return formatCurrency(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        // Update charts
        function updateCharts() {
            updateDebtDistributionChart();
            updatePaymentScheduleChart();
        }

        // Update debt insights
        function updateDebtInsights() {
            const insightsContainer = document.getElementById('debtInsights');
            const emptyInsights = document.getElementById('emptyInsights');

            if (!insightsContainer || !emptyInsights) return;

            if (debts.length === 0) {
                insightsContainer.innerHTML = '';
                emptyInsights.classList.remove('hidden');
                return;
            }

            emptyInsights.classList.add('hidden');

            const activeDebts = debts.filter(debt => debt.status === 'active');
            const settledDebts = debts.filter(debt => debt.status === 'settled');
            const totalMonthly = activeDebts.reduce((sum, debt) => sum + debt.monthlyPayment, 0);
            const totalDebt = activeDebts.reduce((sum, debt) => sum + debt.amount, 0);
            const avgInterest = activeDebts.length > 0 ?
                activeDebts.reduce((sum, debt) => sum + debt.interestRate, 0) / activeDebts.length : 0;

            const insights = [
                {
                    icon: 'fa-chart-line',
                    color: 'from-blue-100 to-purple-100 text-blue-600',
                    title: 'Beban Bulanan',
                    description: `Total cicilan: ${formatCurrency(totalMonthly)}`
                },
                {
                    icon: 'fa-percentage',
                    color: 'from-amber-100 to-orange-100 text-amber-600',
                    title: 'Rata-rata Bunga',
                    description: `${avgInterest.toFixed(1)}% per tahun`
                },
                {
                    icon: 'fa-calendar',
                    color: 'from-green-100 to-emerald-100 text-green-600',
                    title: 'Strategi',
                    description: generateDebtStrategy()
                }
            ];

            insightsContainer.innerHTML = insights.map((insight, index) => `
            <div class="flex items-start space-x-3 p-3 bg-gradient-to-r ${insight.color} rounded-2xl border border-white micro-celebrate stagger-item stagger-${index + 1}">
                <div class="w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm flex-shrink-0">
                    <i class="fas ${insight.icon}"></i>
                </div>
                <div class="flex-1">
                    <h4 class="font-semibold text-gray-800 mb-1">${insight.title}</h4>
                    <p class="text-sm text-gray-600">${insight.description}</p>
                </div>
            </div>
        `).join('');
        }

        // Utility functions
        function formatCurrency(amount) {
            if (!amount && amount !== 0) return 'Rp 0';
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function showNotification(message, type = 'info') {
            const container = document.getElementById('notificationContainer');
            if (!container) return;

            const notification = document.createElement('div');

            const colors = {
                success: 'bg-gradient-to-r from-green-50 to-emerald-50 border-green-200 text-green-700 border-l-green-500',
                error: 'bg-gradient-to-r from-red-50 to-pink-50 border-red-200 text-red-700 border-l-red-500',
                warning: 'bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200 text-amber-700 border-l-amber-500',
                info: 'bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200 text-blue-700 border-l-blue-500'
            };

            notification.className = `notification ${colors[type] || colors.info}`;
            notification.innerHTML = `
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : type === 'warning' ? 'fa-exclamation-triangle' : 'fa-info-circle'} mr-3 text-lg"></i>
                    <span class="text-sm font-medium">${message}</span>
                </div>
                <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-gray-400 hover:text-gray-600 micro-celebrate">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;

            container.appendChild(notification);

            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        // Pastikan navbar fixed
        function fixNavbar() {
            const nav = document.querySelector('nav');
            const main = document.querySelector('main');

            if (!nav || !main) return;

            // Set position fixed
            nav.style.position = 'fixed';
            nav.style.top = '0';
            nav.style.left = '0';
            nav.style.right = '0';
            nav.style.zIndex = '1000';
            nav.style.width = '100%';

            // Hitung tinggi navbar dan set padding
            const navHeight = nav.offsetHeight;
            main.style.paddingTop = navHeight + 20 + 'px';

            // Update saat resize
            window.addEventListener('resize', function () {
                const newHeight = nav.offsetHeight;
                main.style.paddingTop = newHeight + 20 + 'px';
            });
        }

        // Panggil saat halaman load
        document.addEventListener('DOMContentLoaded', fixNavbar);
        window.addEventListener('load', fixNavbar);
    </script>
</body>

</html>
